# Pre-commit Quick Reference

## Setup (One-time)

```bash
# Activate llm13 environment
conda activate llm13

# Pre-commit is already installed and configured
# Hooks are set up in .git/hooks/pre-commit
```

## Daily Usage

```bash
# Always work in llm13 environment
conda activate llm13

# Pre-commit runs automatically on commit
git add .
git commit -m "Your message"
# âœ“ Hooks run automatically

# Manual run on all files
pre-commit run --all-files

# Run on staged files only
pre-commit run

# Run specific hook
pre-commit run black
pre-commit run flake8
pre-commit run mypy
```

## Quick Activation

```bash
# Use the helper script
source .activate-llm13.sh
```

## What Gets Checked

- **Code Formatting**: Black (100 char lines)
- **Import Sorting**: isort
- **Linting**: flake8
- **Type Checking**: mypy
- **Security**: bandit
- **Docstrings**: pydocstyle
- **File Checks**: trailing whitespace, end-of-file, YAML/JSON validation
- **Documentation**: Markdown and YAML formatting

## Common Commands

```bash
# Check which environment is active
which python
# Should show: /home/roudra/anaconda3/envs/llm13/bin/python

# Update hooks to latest versions
pre-commit autoupdate

# Clean pre-commit cache
pre-commit clean

# Skip hooks (not recommended)
git commit --no-verify -m "Skip hooks"

# Run on specific files
pre-commit run --files backend/app/main.py backend/app/core/config.py
```

## Troubleshooting

### Issue: Running in wrong environment

```bash
# Solution: Always activate llm13 first
conda activate llm13
which python  # Verify
pre-commit run --all-files
```

### Issue: Hooks failing

```bash
# Clean and reinstall
pre-commit clean
pre-commit install
pre-commit run --all-files
```

### Issue: Need to bypass hooks temporarily

```bash
# Use --no-verify (not recommended for production)
git commit --no-verify -m "Emergency fix"
```

## Configuration Files

- `.pre-commit-config.yaml` - Hook configuration
- `.git/hooks/pre-commit` - Git hook (auto-generated)
- `.activate-llm13.sh` - Environment activation helper

## Python 3.13 Specific

The project uses Python 3.13 features:

- `pyupgrade` configured for `--py313-plus`
- All hooks use `python3.13` from llm13 environment
- Type hints and modern syntax supported
